<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MULTAs v2 å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #7e57c2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #673ab7;
        }
        .clock-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .category-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            color: white;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª MULTAs v2 å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2>1. ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testLocalStorage()">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="localStorageResult"></div>
    </div>

    <div class="test-section">
        <h2>2. 12æ™‚è¨ˆåˆ†é¡ã‚«ãƒ†ã‚´ãƒªãƒ¼ç¢ºèª</h2>
        <button onclick="testCategories()">ã‚«ãƒ†ã‚´ãƒªãƒ¼è¡¨ç¤º</button>
        <div id="categoriesResult"></div>
    </div>

    <div class="test-section">
        <h2>3. ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testSaveData()">ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä¿å­˜</button>
        <button onclick="testLoadData()">ä¿å­˜ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿</button>
        <div id="saveDataResult"></div>
    </div>

    <div class="test-section">
        <h2>4. ãƒ¬ãƒ™ãƒ«ãƒ»çµŒé¨“å€¤ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testLevelSystem()">ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ ç¢ºèª</button>
        <div id="levelSystemResult"></div>
    </div>

    <div class="test-section">
        <h2>5. ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª</h2>
        <button onclick="window.open('index.html', '_blank')">MULTAs v2ã‚’é–‹ã</button>
        <button onclick="window.open('https://tamikenn.github.io/multas-beta/', '_blank')">GitHub Pagesç‰ˆã‚’é–‹ã</button>
        <div class="test-result info">
            <strong>ç¢ºèªãƒã‚¤ãƒ³ãƒˆï¼š</strong><br>
            âœ“ 12æ™‚è¨ˆåˆ†é¡ã‚·ã‚¹ãƒ†ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹<br>
            âœ“ è¨˜éŒ²å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ãŒå‹•ä½œã™ã‚‹<br>
            âœ“ ä¿å­˜ã—ãŸè¨˜éŒ²ãŒä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹<br>
            âœ“ ãƒ¬ãƒ™ãƒ«ãƒ»çµŒé¨“å€¤ãŒæ›´æ–°ã•ã‚Œã‚‹
        </div>
    </div>

    <script>
        // 12æ™‚è¨ˆã‚«ãƒ†ã‚´ãƒªãƒ¼å®šç¾©ï¼ˆMULTAs v2ã‹ã‚‰ï¼‰
        const categories = {
            0: { name: "åˆ†é¡ä¸èƒ½", color: "#9e9e9e", description: "ã©ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«ã‚‚å½“ã¦ã¯ã¾ã‚‰ãªã„è¨˜éŒ²" },
            1: { name: "ç—…æ…‹ãƒ»è¨ºæ–­", color: "#4285f4", description: "ç—…æ°—ã®ä»•çµ„ã¿ã‚„è¨ºæ–­ãƒ—ãƒ­ã‚»ã‚¹ã®ç†è§£" },
            2: { name: "æ²»ç™‚ãƒ»ã‚±ã‚¢", color: "#ea4335", description: "æ²»ç™‚æ–¹æ³•ã‚„æ‚£è€…ã‚±ã‚¢ã®å®Ÿè·µ" },
            3: { name: "æ‰‹æŠ€ãƒ»æŠ€è¡“", color: "#fbbc04", description: "åŒ»ç™‚æŠ€è¡“ã‚„æ‰‹æŠ€ã®ç¿’å¾—" },
            4: { name: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", color: "#34a853", description: "æ‚£è€…ãƒ»å®¶æ—ãƒ»åŒ»ç™‚è€…ã¨ã®å¯¾è©±" },
            5: { name: "æ‚£è€…ã¸ã®å•é¡Œè§£æ±º", color: "#ff6d00", description: "æ‚£è€…ã®å•é¡Œã‚’ç·åˆçš„ã«è§£æ±ºã™ã‚‹èƒ½åŠ›" },
            6: { name: "ãƒãƒ¼ãƒ åŒ»ç™‚", color: "#ab47bc", description: "å¤šè·ç¨®é€£æºã¨ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯" },
            7: { name: "å€«ç†ãƒ»æ…‹åº¦", color: "#00acc1", description: "åŒ»ç™‚å€«ç†ã¨ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒªã‚ºãƒ " },
            8: { name: "ç¤¾ä¼šãƒ»åˆ¶åº¦", color: "#43a047", description: "åŒ»ç™‚åˆ¶åº¦ã‚„ç¤¾ä¼šçš„å´é¢ã®ç†è§£" },
            9: { name: "è‡ªå·±å­¦ç¿’", color: "#d81b60", description: "è‡ªå·±ç ”é‘½ã¨æŒ¯ã‚Šè¿”ã‚Š" },
            10: { name: "EBMãƒ»ç ”ç©¶", color: "#546e7a", description: "ç§‘å­¦çš„æ ¹æ‹ ã«åŸºã¥ãåŒ»ç™‚" },
            11: { name: "äºˆé˜²ãƒ»å¥åº·", color: "#6a1b9a", description: "äºˆé˜²åŒ»å­¦ã¨å¥åº·å¢—é€²" }
        };

        function testLocalStorage() {
            const result = document.getElementById('localStorageResult');
            try {
                localStorage.setItem('multas-test', 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿');
                const data = localStorage.getItem('multas-test');
                localStorage.removeItem('multas-test');
                
                if (data === 'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿') {
                    result.innerHTML = '<div class="test-result success">âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: æ­£å¸¸å‹•ä½œ</div>';
                } else {
                    result.innerHTML = '<div class="test-result error">âŒ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: èª­ã¿æ›¸ãã‚¨ãƒ©ãƒ¼</div>';
                }
            } catch (e) {
                result.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
            }
        }

        function testCategories() {
            const result = document.getElementById('categoriesResult');
            let html = '<div class="test-result info">12æ™‚è¨ˆåˆ†é¡ã‚«ãƒ†ã‚´ãƒªãƒ¼ä¸€è¦§ï¼š</div>';
            html += '<div class="clock-preview">';
            
            Object.entries(categories).forEach(([hour, cat]) => {
                html += `<div class="category-badge" style="background-color: ${cat.color}">
                    ${hour}æ™‚ - ${cat.name}
                </div>`;
            });
            
            html += '</div>';
            result.innerHTML = html;
        }

        function testSaveData() {
            const result = document.getElementById('saveDataResult');
            try {
                const testRecord = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    text: "ãƒ†ã‚¹ãƒˆè¨˜éŒ²: å¾ªç’°å™¨å†…ç§‘ã§å¿ƒã‚¨ã‚³ãƒ¼æ¤œæŸ»ã‚’è¦‹å­¦",
                    category: 1,
                    subcategory: "",
                    dayNumber: 1
                };
                
                let records = JSON.parse(localStorage.getItem('multas-records') || '[]');
                records.push(testRecord);
                localStorage.setItem('multas-records', JSON.stringify(records));
                
                result.innerHTML = '<div class="test-result success">âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸ</div>';
            } catch (e) {
                result.innerHTML = `<div class="test-result error">âŒ ä¿å­˜ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
            }
        }

        function testLoadData() {
            const result = document.getElementById('saveDataResult');
            try {
                const records = JSON.parse(localStorage.getItem('multas-records') || '[]');
                if (records.length > 0) {
                    result.innerHTML = `<div class="test-result success">âœ… ${records.length}ä»¶ã®è¨˜éŒ²ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ</div>`;
                    records.slice(-3).forEach(record => {
                        const cat = categories[record.category] || categories[0];
                        result.innerHTML += `<div class="test-result info">
                            - ${new Date(record.timestamp).toLocaleString('ja-JP')}: 
                            <span class="category-badge" style="background-color: ${cat.color}">${cat.name}</span>
                            ${record.text.substring(0, 30)}...
                        </div>`;
                    });
                } else {
                    result.innerHTML = '<div class="test-result info">ä¿å­˜ã•ã‚ŒãŸè¨˜éŒ²ã¯ã‚ã‚Šã¾ã›ã‚“</div>';
                }
            } catch (e) {
                result.innerHTML = `<div class="test-result error">âŒ èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
            }
        }

        function testLevelSystem() {
            const result = document.getElementById('levelSystemResult');
            try {
                const stats = JSON.parse(localStorage.getItem('multas-stats') || '{}');
                const recordCount = stats.recordCount || 0;
                const exp = stats.exp || 0;
                const level = Math.floor(Math.sqrt(exp / 50)) + 1;
                const expForCurrentLevel = Math.pow(level - 1, 2) * 50;
                const expForNextLevel = Math.pow(level, 2) * 50;
                const expProgress = exp - expForCurrentLevel;
                const expNeeded = expForNextLevel - expForCurrentLevel;
                
                result.innerHTML = `
                    <div class="test-result info">
                        <strong>ğŸ“Š ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼š</strong><br>
                        ãƒ¬ãƒ™ãƒ«: ${level}<br>
                        ç·çµŒé¨“å€¤: ${exp} EXP<br>
                        æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¾ã§: ${expNeeded - expProgress} EXP<br>
                        è¨˜éŒ²å›æ•°: ${recordCount}å›<br>
                        é€²æ—: ${Math.floor((expProgress / expNeeded) * 100)}%
                    </div>
                `;
            } catch (e) {
                result.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
            }
        }

        // åˆæœŸçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
        window.onload = function() {
            console.log('MULTAs v2 ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
        };
    </script>
</body>
</html>